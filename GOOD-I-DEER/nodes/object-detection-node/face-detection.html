<script type="text/javascript">
  RED.nodes.registerType("face-detection", {
    category: "GOOD I DEER",
    color: "#1AE5BE",
    defaults: {
      name: { value: "" },
      returnType: { value: "information", validate: function(v) {
        const returnType = Number(v);

        if(returnType <= 1) {
          $("#absolutePathDir-form").css('display', 'none');
          this.outputs = 1;
          if(returnType == 0) {
            this._def.outputLabels = ["Information"];
          } else if(returnType == 1) {
            this._def.outputLabels = ["Image Buffer"];
          }
        } else if (returnType == 2){
          $("#absolutePathDir-form").css('display', 'block');
          this.outputs = 0;
          this._def.outputLabels = undefined;
        }
        return true;
      } },
      threshold: {value: 0.5, validate: function(v) {
        let threshold = Number(v);
        
        if(threshold < 0 || threshold >= 1){
          $("#threshold-warning").css('display', 'block'); 
        }else{
          $("#threshold-warning").css('display', 'none'); 
        }
        return threshold >= 0 && threshold < 1;
      }},
      absolutePathDir: { value: "", validate: function(v) {
        if(v)
          return true;
        return false;
      } }
    },
    inputs: 1,
    outputs: 1,
    paletteLabel: "Good Face Detection",
    icon: "font-awesome/fa-smile-o",
    label: function () {
      return this.name || "Good Face Detection";
    },
    inputLabels: ["Image Buffer"],
    outputLabels: undefined
  });
</script>

<script type="text/html" data-template-name="face-detection">
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="Name" />
  </div>
  <div class="form-row">
    <label for="node-input-returnType"><i class="fa fa-file"></i> Return Type</label>
    <select type="text" id="node-input-returnType">
      <option value=0>Inforamation</option>
      <option value=1>Image Buffer</option>
      <option value=2>Image File</option>
    </select>
  </div>
  <div class="form-row">
    <label for="node-input-threshold"><i class="fa fa-sort"></i> Threshold</label>
    <input type="number" id="node-input-threshold" step="0.1" />
    <p id="threshold-warning" style="color: red; display: none; margin-left: 105px;" >0 â‰¤ threshold < 1</p>
  </div>
  <div class="form-row" id="absolutePathDir-form">
    <label for="node-input-absolutePathDir"><i class="fa fa-folder"></i> Absolute Path Dir</label>
    <input type="text" id="node-input-absolutePathDir" />
  </div>
</script>

<script type="text/html" data-help-name="face-detection">
  <p>face-detection node using yolov8</p>
</script>
